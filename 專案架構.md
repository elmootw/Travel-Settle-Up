# 旅遊分帳 - 專案架構

## 📋 專案概述

多人旅遊共享記帳應用，使用 React + Firebase 技術棧。支援管理者建立旅遊和管理成員，普通使用者可以新增編輯支出並即時看到結算情況。

## ✅ 核心功能

### 管理者功能
- ✅ 建立旅遊分帳群組
- ✅ 新增團員（自動產生隨機密碼）
- ✅ 編輯旅遊名稱
- ✅ 編輯團員名稱
- ✅ 移除團員
- ✅ 查看成員和密碼（只有管理者可見）
- ✅ 刪除旅遊及所有相關資料
- ✅ 編輯/刪除任何支出

### 使用者功能
- ✅ 帳號密碼登入
- ✅ 查看自己是團員的旅遊
- ✅ 新增支出
- ✅ 編輯自己新增的支出
- ✅ 刪除自己新增的支出
- ✅ 多選分帳人

### 記帳與結算
- ✅ 新增支出（記錄項目、金額、支付人、分帳人、建立時間）
- ✅ 編輯支出
- ✅ 刪除支出
- ✅ 即時計算應收/應付金額
- ✅ 結算概況卡片（可展開/收合）
- ✅ 顏色區分：綠色（應收）/ 紅色（應付）/ 灰色（已結清）

### 響應式設計
- ✅ 手機版（< 640px）：單欄布局
- ✅ 平板版（640px - 1024px）：兩欄布局
- ✅ 桌面版（> 1024px）：完整三欄布局

### 設計系統
- 主色調：藍色系（#0ea5e9）
- 輔助色：綠色（#10b981）、紅色（#ef4444）、灰色（#6b7280）
- 字體：Noto Sans TC

## 🔧 技術棧

| 技術 | 版本 | 用途 |
|------|------|------|
| React | 18+ | UI 框架 |
| Firebase | Latest | Authentication + Realtime Database |
| Tailwind CSS | 3+ | 樣式框架 |
| GitHub Pages | - | 靜態網站託管 |
| GitHub Actions | - | CI/CD 自動部署 |

## 📁 實際專案結構

```
.
├── public
│   ├── favicon.ico
│   ├── index.html
│   └── manifest.json
├── src
│   ├── App.jsx
│   ├── components
│   │   ├── BalanceCard.jsx
│   │   ├── LoginForm.jsx
│   │   └── Navbar.jsx
│   ├── config
│   │   └── firebase.js
│   ├── hooks
│   │   └── useAuth.js
│   ├── pages
│   │   ├── Dashboard.jsx
│   │   └── LoginPage.jsx
│   ├── services
│   │   └── sheetService.js
│   └── styles
│       └── index.css
├── .env.local
├── .gitignore
├── package.json
└── README.md
```

- **public/**：靜態檔案
- **src/**：程式碼
  - **components/**：共用元件
  - **config/**：設定檔
  - **hooks/**：自訂 Hook
  - **pages/**：頁面元件
  - **services/**：與後端互動的服務
  - **styles/**：全域樣式
- **.env.local**：環境變數（本地開發用）
- **.gitignore**：Git 忽略的檔案
- **package.json**：專案設定和相依套件
- **README.md**：專案說明文件

## 🔒 安全性最佳實踐

1. **敏感資訊管理**：
   - 所有 API keys 存在環境變數（不硬寫在代碼）
   - GitHub Secrets 用於 CI/CD
   - `.env.local` 在 .gitignore 中

2. **使用者認證**：
   - Firebase Authentication 處理密碼加密和儲存
   - 不應在前端儲存密碼
   - 登入失敗訊息應為通用訊息，不洩露有效帳號資訊

3. **資料庫安全**：
   - Firebase 規則要求認證（`auth != null`）
   - 未認證用戶無法存取任何資料
   - 所有讀寫操作都需要有效的 auth token

4. **版本控制**：
   - 定期使用 `git filter-repo` 清除敏感資訊洩露
   - 檢查 git 歷史中是否有機敏資訊

## 📱 典型使用者流程

### 首次使用
1. 進入應用 → 看到登入頁面
2. 輸入有效的帳號和密碼
3. 點擊登入，Firebase 驗證
4. 驗證成功後進入儀表板

### 日常操作
- **新增支出**：點擊「新增支出」，填寫支出表單
- **查看結餘**：BalanceCard 顯示各成員間的債務關係
- **結清帳務**：記錄清算交易
- **登出**：點擊登出按鈕結束會話

## 📊 應用特性

1. **多人協作**：多個使用者可以共享同一個記帳紀錄
2. **實時同步**：使用 Firebase Realtime Database 進行即時更新
3. **自動部署**：GitHub Actions 自動構建和部署到 GitHub Pages
4. **離線備份**：支出資料同時存在 localStorage（離線存取）
5. **響應式設計**：使用 Tailwind CSS 支援多設備

## 🔄 Git 相關

### 敏感資訊管理
- 使用 `.gitignore` 排除敏感檔案
- 定期檢查 git 歷史中是否有洩露的機敏資訊
- 如有洩露，使用 `git filter-repo` 清除

### 標準工作流程
```bash
git add .
git commit -m "descriptive message"
git push origin main
```
推送會自動觸發 GitHub Actions 部署

## 📞 維護注意事項

1. **定期更新依賴**：檢查安全漏洞和新版本
2. **監控 Firebase 配額**：確保未超過免費層限制
3. **檢查 GitHub Actions 日誌**：部署失敗時查看詳細錯誤
4. **備份重要資料**：定期導出 Firebase 資料
5. **監控成本**：Firebase 超免費層後會產生費用

