# 旅遊分帳 - 專案架構

## 📋 專案概述

多人旅遊共享記帳應用，使用 React + Firebase 技術棧。

## ✅ 核心功能

### 管理者
- 建立旅遊分帳群組
- 新增團員（自動產生隨機密碼）
- 查看成員和密碼
- 刪除旅遊

### 使用者
- 帳號密碼登入
- 查看自己的旅遊
- 新增、編輯、刪除支出
- 多選分帳人

### 記帳
- 新增支出
- 編輯支出
- 刪除支出
- 記錄建立時間

### 結算
- 即時計算應收/應付金額
- 結算卡片（展開/收合）
- 顏色區分：綠色（應收）/ 紅色（應付）/ 灰色（已結清）

### 設計
- 響應式設計（手機、平板、桌面）
- 藍色主色調
- 綠色、紅色、灰色輔助色

## 🔧 技術棧

| 技術 | 用途 |
|------|------|
| React 18+ | UI 框架 |
| Firebase | Authentication + Database |
| Tailwind CSS | 樣式 |
| GitHub Pages | 託管 |
| GitHub Actions | 自動部署 |

## 📁 專案結構

```
.
├── public
│   ├── favicon.ico
│   ├── index.html
│   └── manifest.json
├── src
│   ├── App.jsx
│   ├── components
│   │   ├── BalanceCard.jsx
│   │   ├── LoginForm.jsx
│   │   └── Navbar.jsx
│   ├── config
│   │   └── firebase.js
│   ├── hooks
│   │   └── useAuth.js
│   ├── pages
│   │   ├── Dashboard.jsx
│   │   └── LoginPage.jsx
│   ├── services
│   │   └── sheetService.js
│   └── styles
│       └── index.css
├── .env.local
├── .gitignore
├── package.json
└── README.md
```

- **public/**：靜態檔案
- **src/**：程式碼
  - **components/**：共用元件
  - **config/**：設定檔
  - **hooks/**：自訂 Hook
  - **pages/**：頁面元件
  - **services/**：與後端互動的服務
  - **styles/**：全域樣式
- **.env.local**：環境變數（本地開發用）
- **.gitignore**：Git 忽略的檔案
- **package.json**：專案設定和相依套件
- **README.md**：專案說明文件

## 🔒 安全性最佳實踐

1. **敏感資訊管理**：
   - 所有 API keys 存在環境變數（不硬寫在代碼）
   - GitHub Secrets 用於 CI/CD
   - `.env.local` 在 .gitignore 中

2. **使用者認證**：
   - Firebase Authentication 處理密碼加密和儲存
   - 不應在前端儲存密碼
   - 登入失敗訊息應為通用訊息，不洩露有效帳號資訊

3. **資料庫安全**：
   - Firebase 規則要求認證（`auth != null`）
   - 未認證用戶無法存取任何資料
   - 所有讀寫操作都需要有效的 auth token

4. **版本控制**：
   - 定期使用 `git filter-repo` 清除敏感資訊洩露
   - 檢查 git 歷史中是否有機敏資訊

## 📱 典型使用者流程

### 首次使用
1. 進入應用 → 看到登入頁面
2. 輸入有效的帳號和密碼
3. 點擊登入，Firebase 驗證
4. 驗證成功後進入儀表板

### 日常操作
- **新增支出**：點擊「新增支出」，填寫支出表單
- **查看結餘**：BalanceCard 顯示各成員間的債務關係
- **結清帳務**：記錄清算交易
- **登出**：點擊登出按鈕結束會話

## 📊 應用特性

1. **多人協作**：多個使用者可以共享同一個記帳紀錄
2. **實時同步**：使用 Firebase Realtime Database 進行即時更新
3. **自動部署**：GitHub Actions 自動構建和部署到 GitHub Pages
4. **離線備份**：支出資料同時存在 localStorage（離線存取）
5. **響應式設計**：使用 Tailwind CSS 支援多設備

## 🔄 Git 相關

### 敏感資訊管理
- 使用 `.gitignore` 排除敏感檔案
- 定期檢查 git 歷史中是否有洩露的機敏資訊
- 如有洩露，使用 `git filter-repo` 清除

### 標準工作流程
```bash
git add .
git commit -m "descriptive message"
git push origin main
```
推送會自動觸發 GitHub Actions 部署

## 📞 維護注意事項

1. **定期更新依賴**：檢查安全漏洞和新版本
2. **監控 Firebase 配額**：確保未超過免費層限制
3. **檢查 GitHub Actions 日誌**：部署失敗時查看詳細錯誤
4. **備份重要資料**：定期導出 Firebase 資料
5. **監控成本**：Firebase 超免費層後會產生費用

